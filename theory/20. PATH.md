

---

# 📂 Node.js `path` Module — Full Guide

```js
const path = require("path");
```

---

## 1️⃣ Path Separators

- **`path.sep`** → OS-specific separator
    
    ```js
    console.log(path.sep); // "/" on Linux/macOS, "\" on Windows
    ```
    

---

## 2️⃣ Joining Paths

- **`path.join([...paths])`**  
    Safely concatenates multiple segments, removing `..` and `.`
    
    ```js
    const filePath = path.join("folder", "subfolder", "file.txt");
    console.log(filePath); // "folder/subfolder/file.txt" (Linux)
    ```
    

💡 Better than `"folder/" + "subfolder"` because it auto-handles slashes.

---

## 3️⃣ Resolving Absolute Paths

- **`path.resolve([...paths])`**  
    Builds an **absolute path** from segments.
    
    ```js
    console.log(path.resolve("folder", "file.txt"));
    // e.g. "/home/jashan/currentdir/folder/file.txt"
    ```
    

👉 Key difference from `join`:

- `join` = concatenates
    
- `resolve` = resolves to absolute (starting from `__dirname` if relative)
    

---

## 4️⃣ Normalizing Paths

- **`path.normalize(p)`**  
    Cleans up redundant slashes or `..`/`.`
    
    ```js
    console.log(path.normalize("folder////sub/../file.txt"));
    // "folder/file.txt"
    ```
    

---

## 5️⃣ File Name & Directory Info

- **`path.basename(p)`** → file name
    
    ```js
    console.log(path.basename("/home/jashan/notes.txt")); // "notes.txt"
    ```
    
- **`path.extname(p)`** → file extension
    
    ```js
    console.log(path.extname("notes.txt")); // ".txt"
    ```
    
- **`path.dirname(p)`** → directory name
    
    ```js
    console.log(path.dirname("/home/jashan/notes.txt"));
    // "/home/jashan"
    ```
    

---

## 6️⃣ Parse & Format

- **`path.parse(p)`** → breaks into parts
    
    ```js
    console.log(path.parse("/home/jashan/notes.txt"));
    /* {
         root: '/',
         dir: '/home/jashan',
         base: 'notes.txt',
         ext: '.txt',
         name: 'notes'
       } */
    ```
    
- **`path.format(obj)`** → inverse of `parse`
    
    ```js
    const obj = { dir: "/home/jashan", name: "notes", ext: ".txt" };
    console.log(path.format(obj)); // "/home/jashan/notes.txt"
    ```
    

---

## 7️⃣ Cross-platform file paths

- **`path.posix`** and **`path.win32`** → explicitly use Unix or Windows behavior, regardless of OS.
    
    ```js
    console.log(path.posix.join("folder", "file.txt")); // "folder/file.txt"
    console.log(path.win32.join("folder", "file.txt")); // "folder\file.txt"
    ```
    

---

# 🔥 Practical Example: Safe File Serving

Imagine an HTTP server serving files.  
Without `path`, someone could hack with `../..` paths.

```js
const http = require("http");
const fs = require("fs");

const server = http.createServer((req, res) => {
  const safeBase = path.join(__dirname, "public"); // Only serve from ./public
  const safePath = path.normalize(path.join(safeBase, req.url));

  // Prevent directory traversal
  if (!safePath.startsWith(safeBase)) {
    res.writeHead(403);
    return res.end("Access denied");
  }

  fs.readFile(safePath, (err, data) => {
    if (err) {
      res.writeHead(404);
      return res.end("Not Found");
    }
    res.writeHead(200);
    res.end(data);
  });
});

server.listen(3000, () => console.log("Server running on port 3000"));
```

---

# 📌 Summary

- `join()` → combine paths safely
    
- `resolve()` → get absolute path
    
- `normalize()` → clean up weird paths
    
- `basename()`, `dirname()`, `extname()` → extract parts
    
- `parse()` & `format()` → convert between string ↔ object
    

---
