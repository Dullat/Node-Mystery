
---

# ğŸŒ HTTP Headers â€” Full Guide

### 1ï¸âƒ£ What are Headers?

Headers are **metadata** about the request/response.

- Request headers â†’ info about client & what it wants.
    
- Response headers â†’ info about server & what itâ€™s sending back.
    

Think of them as the **envelope details** around the actual **letter (body)**.

---

### 2ï¸âƒ£ Request Headers

Sent by the client (browser, Postman, etc.) to the server.

#### ğŸ”¹ Common ones:

- **Host** â†’ which domain youâ€™re hitting
    
    ```
    Host: example.com
    ```
    
- **User-Agent** â†’ info about browser/device
    
    ```
    User-Agent: Mozilla/5.0
    ```
    
- **Accept** â†’ what response formats are allowed
    
    ```
    Accept: text/html, application/json
    ```
    
- **Accept-Encoding** â†’ compression methods allowed
    
    ```
    Accept-Encoding: gzip, deflate
    ```
    
- **Content-Type** â†’ what format the client is sending
    
    ```
    Content-Type: application/json
    ```
    
- **Authorization** â†’ for API keys, JWT, etc.
    
    ```
    Authorization: Bearer <token>
    ```
    
- **Cookie** â†’ cookies stored on client
    
    ```
    Cookie: sessionId=abc123
    ```
    

---

### 3ï¸âƒ£ Response Headers

Sent by the server back to the client.

#### ğŸ”¹ Common ones:

- **Content-Type** â†’ tells browser how to interpret body
    
    ```
    Content-Type: text/html; charset=UTF-8
    Content-Type: application/json
    ```
    
- **Content-Length** â†’ number of bytes in response
    
    ```
    Content-Length: 1234
    ```
    
- **Cache-Control** â†’ caching strategy
    
    ```
    Cache-Control: no-cache, no-store, must-revalidate
    Cache-Control: max-age=3600
    ```
    
- **Set-Cookie** â†’ sets a cookie on client
    
    ```
    Set-Cookie: sessionId=abc123; HttpOnly; Secure
    ```
    
- **Location** â†’ redirect target
    
    ```
    Location: /login
    ```
    
- **Access-Control-Allow-Origin** â†’ CORS control
    
    ```
    Access-Control-Allow-Origin: *
    ```
    

---

### 4ï¸âƒ£ Headers in Node.js

You can **read** and **set** headers easily.

#### Read request headers:

```js
const server = http.createServer((req, res) => {
  console.log(req.headers); // all headers
  console.log(req.headers['user-agent']); // specific
});
```

#### Set response headers:

```js
res.writeHead(200, {
  'Content-Type': 'application/json',
  'Cache-Control': 'no-cache'
});
res.end(JSON.stringify({ msg: "Hello" }));
```

---

### 5ï¸âƒ£ Gotchas ğŸš¨

- **Headers are case-insensitive** â†’ `Content-Type` = `content-type`
    
- **Headers must be sent before the body**
    
    ```js
    res.write("body");
    res.setHeader("Content-Type", "text/html"); // âŒ ERROR
    ```
    
- **Security risk: donâ€™t trust client headers blindly**  
    Example: `X-Forwarded-For` can be faked.
    

---

### 6ï¸âƒ£ Important Special Headers

#### Content-Type & Body Parsing

- `application/json` â†’ JSON body
    
- `application/x-www-form-urlencoded` â†’ HTML form
    
- `multipart/form-data` â†’ file uploads
    

ğŸ‘‰ In **vanilla Node.js** you must parse body manually based on `Content-Type`.  
ğŸ‘‰ In **Express** middleware like `express.json()` does this for you.

---

#### CORS (Cross-Origin Resource Sharing)

When your frontend (`localhost:3000`) talks to backend (`localhost:5000`), browser checks **CORS headers**:

```http
Access-Control-Allow-Origin: http://localhost:3000
Access-Control-Allow-Methods: GET, POST
Access-Control-Allow-Headers: Content-Type, Authorization
```

ğŸ‘‰ Without these, frontend JS requests fail with _CORS error_.

---

#### Security Headers (best practices)

These are usually added by libraries like `helmet`:

- `Strict-Transport-Security` â†’ force HTTPS
    
- `X-Content-Type-Options: nosniff` â†’ prevent MIME sniffing
    
- `X-Frame-Options: DENY` â†’ prevent clickjacking
    
- `Content-Security-Policy` â†’ block inline scripts, control resources
    

---

### 7ï¸âƒ£ Real-World Example: JSON API

```js
const http = require("http");

const server = http.createServer((req, res) => {
  if (req.url === "/api" && req.method === "GET") {
    res.writeHead(200, {
      "Content-Type": "application/json",
      "Cache-Control": "no-store",
      "Access-Control-Allow-Origin": "*"
    });
    res.end(JSON.stringify({ status: "ok", data: [1, 2, 3] }));
  } else {
    res.writeHead(404, { "Content-Type": "text/plain" });
    res.end("Not Found");
  }
});

server.listen(3000, () => console.log("Server running on port 3000"));
```

---

ğŸ“Œ **Summary**:

- Headers = rules & metadata for request/response.
    
- Some must-have: `Content-Type`, `Content-Length`, `Cache-Control`, `Access-Control-Allow-Origin`.
    
- Security, performance, and compatibility depend heavily on **correct headers**.
    

---
