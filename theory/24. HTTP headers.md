
---

# 🌐 HTTP Headers — Full Guide

### 1️⃣ What are Headers?

Headers are **metadata** about the request/response.

- Request headers → info about client & what it wants.
    
- Response headers → info about server & what it’s sending back.
    

Think of them as the **envelope details** around the actual **letter (body)**.

---

### 2️⃣ Request Headers

Sent by the client (browser, Postman, etc.) to the server.

#### 🔹 Common ones:

- **Host** → which domain you’re hitting
    
    ```
    Host: example.com
    ```
    
- **User-Agent** → info about browser/device
    
    ```
    User-Agent: Mozilla/5.0
    ```
    
- **Accept** → what response formats are allowed
    
    ```
    Accept: text/html, application/json
    ```
    
- **Accept-Encoding** → compression methods allowed
    
    ```
    Accept-Encoding: gzip, deflate
    ```
    
- **Content-Type** → what format the client is sending
    
    ```
    Content-Type: application/json
    ```
    
- **Authorization** → for API keys, JWT, etc.
    
    ```
    Authorization: Bearer <token>
    ```
    
- **Cookie** → cookies stored on client
    
    ```
    Cookie: sessionId=abc123
    ```
    

---

### 3️⃣ Response Headers

Sent by the server back to the client.

#### 🔹 Common ones:

- **Content-Type** → tells browser how to interpret body
    
    ```
    Content-Type: text/html; charset=UTF-8
    Content-Type: application/json
    ```
    
- **Content-Length** → number of bytes in response
    
    ```
    Content-Length: 1234
    ```
    
- **Cache-Control** → caching strategy
    
    ```
    Cache-Control: no-cache, no-store, must-revalidate
    Cache-Control: max-age=3600
    ```
    
- **Set-Cookie** → sets a cookie on client
    
    ```
    Set-Cookie: sessionId=abc123; HttpOnly; Secure
    ```
    
- **Location** → redirect target
    
    ```
    Location: /login
    ```
    
- **Access-Control-Allow-Origin** → CORS control
    
    ```
    Access-Control-Allow-Origin: *
    ```
    

---

### 4️⃣ Headers in Node.js

You can **read** and **set** headers easily.

#### Read request headers:

```js
const server = http.createServer((req, res) => {
  console.log(req.headers); // all headers
  console.log(req.headers['user-agent']); // specific
});
```

#### Set response headers:

```js
res.writeHead(200, {
  'Content-Type': 'application/json',
  'Cache-Control': 'no-cache'
});
res.end(JSON.stringify({ msg: "Hello" }));
```

---

### 5️⃣ Gotchas 🚨

- **Headers are case-insensitive** → `Content-Type` = `content-type`
    
- **Headers must be sent before the body**
    
    ```js
    res.write("body");
    res.setHeader("Content-Type", "text/html"); // ❌ ERROR
    ```
    
- **Security risk: don’t trust client headers blindly**  
    Example: `X-Forwarded-For` can be faked.
    

---

### 6️⃣ Important Special Headers

#### Content-Type & Body Parsing

- `application/json` → JSON body
    
- `application/x-www-form-urlencoded` → HTML form
    
- `multipart/form-data` → file uploads
    

👉 In **vanilla Node.js** you must parse body manually based on `Content-Type`.  
👉 In **Express** middleware like `express.json()` does this for you.

---

#### CORS (Cross-Origin Resource Sharing)

When your frontend (`localhost:3000`) talks to backend (`localhost:5000`), browser checks **CORS headers**:

```http
Access-Control-Allow-Origin: http://localhost:3000
Access-Control-Allow-Methods: GET, POST
Access-Control-Allow-Headers: Content-Type, Authorization
```

👉 Without these, frontend JS requests fail with _CORS error_.

---

#### Security Headers (best practices)

These are usually added by libraries like `helmet`:

- `Strict-Transport-Security` → force HTTPS
    
- `X-Content-Type-Options: nosniff` → prevent MIME sniffing
    
- `X-Frame-Options: DENY` → prevent clickjacking
    
- `Content-Security-Policy` → block inline scripts, control resources
    

---

### 7️⃣ Real-World Example: JSON API

```js
const http = require("http");

const server = http.createServer((req, res) => {
  if (req.url === "/api" && req.method === "GET") {
    res.writeHead(200, {
      "Content-Type": "application/json",
      "Cache-Control": "no-store",
      "Access-Control-Allow-Origin": "*"
    });
    res.end(JSON.stringify({ status: "ok", data: [1, 2, 3] }));
  } else {
    res.writeHead(404, { "Content-Type": "text/plain" });
    res.end("Not Found");
  }
});

server.listen(3000, () => console.log("Server running on port 3000"));
```

---

📌 **Summary**:

- Headers = rules & metadata for request/response.
    
- Some must-have: `Content-Type`, `Content-Length`, `Cache-Control`, `Access-Control-Allow-Origin`.
    
- Security, performance, and compatibility depend heavily on **correct headers**.
    

---
